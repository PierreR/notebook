= Docker

== docker engine

```
â†’ docker run -d --net compose_default puppet/puppet-agent-centos <1> <2>
```
<1> `-d` for detached (will run in the background)
<2>  `--net compose_default` specify the network created by default by docker-compose

== Docker compose


== Consul

== Swarm node

Each node is configured by puppet and contain:

- a container swarm running inside a docker (spawn with the docker engine daemon)
- a docker registrator running inside a docker (spawn with the docker engine daemon)
- a consult agent (doesn't run within a docker)

== DNS

Consul is used as a DNS service. `dnsmask` is configured within each swarm node while every dockers inside a node is running with `--dns 172.17.0.1`.footnote:[the DNS host for every docker is always 172.17.0.1]
